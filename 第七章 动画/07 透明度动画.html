<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			#box {
				width: 200px;
				height: 200px;
				background-color: red;
				opacity: 0.3;
				/* 兼容ie8及以下 */
				filter:alpha(opacity:30);
			}
		</style>
	</head>
	<body>
		<div id="box">

		</div>
		<script type="text/javascript">
			window.onload=function(){
				var box = document.getElementById('box');
				box.onmouseover = function() {
					opacityAnimation(this, 100)
				};
				box.onmouseout = function() {
					opacityAnimation(this, 30)
				};
				
				var timer = null;alpha = 30, speed = 0;
				function opacityAnimation(obj, endAlpha) {
					clearInterval(timer);
					timer = setInterval(function(){
						speed = endAlpha > alpha ? 5 : -5;
						//边界处理
						if (alpha === endAlpha) {
							clearInterval(timer);
							return;
						}
						//改变当前的alpha的值
						alpha += speed;
						//修改值
						obj.style.opacity = alpha / 100;
						obj.style.filter =  'alpha(opacity:'+alpha+')';//ie8兼容,不支持模板字符串
					},30)	
				}
			}
		</script>
	</body>
</html>
